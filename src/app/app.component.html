<div class="container">
  <header class="hero">
    <div class="hero-text">
      <h1>{{ TITLE }}</h1>
      <p class="subtitle">ุณุงูุงูู ุณุงุฏู ู ุฒุจุง ุจุฑุง ูุฏุฑุช ุณูุชโูุง ู ูพุณุชโูุง</p>
      <div class="cta">
        <button class="btn-main" (click)="openModal()">๐ ูุฏุฑุช ุณูุชโูุง</button>
      </div>
    </div>
    <div class="hero-stats">
      <div class="stat">
        <div class="stat-value">{{ mainGridData.length }}</div>
        <div class="stat-label">ุฑฺฉูุฑุฏ ุซุจุชโุดุฏู</div>
      </div>
      <div class="stat">
        <div class="stat-value">{{ jobTitles.length }}</div>
        <div class="stat-label">ุนููุงู ุณุทุญ</div>
      </div>
      <div class="stat">
        <div class="stat-value">โ๏ธ</div>
        <div class="stat-label">ูุฑุงุด ู ุงูุฒูุฏู ุณุฑุน</div>
      </div>
    </div>
  </header>

  <div class="modal" *ngIf="showModal" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">

      <div class="modal-header">
        <h2>ูุฏุฑุช ุณูุชโูุง</h2>
        <button class="close-btn" (click)="closeModal()">ร</button>
      </div>

      <div class="table-wrapper" role="region" aria-label="ุฌุฏูู ุณูุชโูุง">
        <table>
          <thead>
            <tr>
              <th>ุณุทุญ</th>
              <th>ุนููุงู ุณุทุญ</th>
              <th>ุดูุงุฑู ูพุณุช</th>
              <th>ุณูุช ูพุดโูุฑุถ</th>
              <th>ุณูุช ฺฉุงุฑุจุฑ</th>
              <th>ุนููุงุช</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of mainGridData; let i = index">
              <td>{{ item.level }}</td>
              <td>{{ item.title }}</td>
              <td>{{ item.postNumber }}</td>
              <td>{{ item.defaultJobTitle }}</td>
              <td>{{ item.userJobTitle }}</td>
              <td class="action-buttons">
                <button class="btn-edit" (click)="editItem(i)" aria-label="ูุฑุงุด ุฑุฏู {{ i + 1 }}">โ๏ธ ูุฑุงุด</button>
                <button class="btn-delete" (click)="deleteItem(i)" aria-label="ุญุฐู ุฑุฏู {{ i + 1 }}">๐๏ธ ุญุฐู</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="form-box" *ngIf="editingIndex !== null || adding">
        <h3>{{ editingIndex !== null ? 'ูุฑุงุด ุณูุช' : 'ุงูุฒูุฏู ุณูุช ุฌุฏุฏ' }}</h3>
        <form [formGroup]="form" (ngSubmit)="saveForm()">
          <input type="number" formControlName="level" placeholder="ุณุทุญ" readonly />
          <select formControlName="title" (change)="onTitleSelected($event)">
            <option value="" disabled>ุงูุชุฎุงุจ ุนููุงู ุณุทุญ</option>
            <option *ngFor="let job of jobTitles" [value]="job.title">{{ job.title }}</option>
          </select>
          <input type="number" formControlName="postNumber" placeholder="ุดูุงุฑู ูพุณุช" required />
          <input type="text" formControlName="defaultJobTitle" placeholder="ุณูุช ูพุดโูุฑุถ" />
          <input type="text" formControlName="userJobTitle" placeholder="ุณูุช ฺฉุงุฑุจุฑ" />

          <div class="modal-footer">
            <button type="submit" class="btn-save" [disabled]="form.invalid">โ ุฐุฎุฑู</button>
            <button type="button" class="btn-cancel" (click)="cancelForm()">โ ุงูุตุฑุงู</button>
          </div>
        </form>
      </div>

      <div class="modal-footer" *ngIf="editingIndex === null && !adding">
        <button class="btn-add" (click)="addItem()">โ ุงูุฒูุฏู</button>
      </div>

    </div>
  </div>
</div>
