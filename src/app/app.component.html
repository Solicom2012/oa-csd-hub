<div class="container">
  <h1>{{ TITLE }}</h1>
  <button class="btn-main" (click)="openModal()">๐ ูุฏุฑุช ุณูุชโูุง</button>

  <div class="modal" *ngIf="showModal" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">

      <!-- ูุฏุฑ ููุฏุงู -->
      <div class="modal-header">
        <h2>ูุฏุฑุช ุณูุชโูุง</h2>
        <button class="close-btn" (click)="closeModal()">ร</button>
      </div>

      <!-- ุฌุฏูู -->
      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>ุณุทุญ</th>
              <th>ุนููุงู ุณุทุญ</th>
              <th>ุดูุงุฑู ูพุณุช</th>
              <th>ุณูุช ูพุดโูุฑุถ</th>
              <th>ุณูุช ฺฉุงุฑุจุฑ</th>
              <th>ุนููุงุช</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of mainGridData; let i = index">
              <td>{{ item.level }}</td>
              <td>{{ item.title }}</td> <!-- ุชุบุฑ ุงุฒ titleName ุจู title -->
              <td>{{ item.postNumber }}</td>
              <td>{{ item.defaultJobTitle }}</td>
              <td>{{ item.userJobTitle }}</td>
              <td>
                <button class="btn-edit" (click)="editItem(i)">โ๏ธ ูุฑุงุด</button>
                <button class="btn-delete" (click)="deleteItem(i)">๐๏ธ ุญุฐู</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- ูุฑู ุงูุฒูุฏู / ูุฑุงุด -->
      <div class="form-box" *ngIf="editingIndex !== null || adding">
        <h3>{{ editingIndex !== null ? 'ูุฑุงุด ุณูุช' : 'ุงูุฒูุฏู ุณูุช ุฌุฏุฏ' }}</h3>
        <form (ngSubmit)="saveForm()">
          <input type="number" [(ngModel)]="formModel.level" name="level" placeholder="ุณุทุญ" required readonly />

          <select [(ngModel)]="formModel.title" name="title" required
                  (ngModelChange)="onTitleSelected($event)">
            <option value="" disabled selected>ุงูุชุฎุงุจ ุนููุงู ุณุทุญ</option>
            <option *ngFor="let job of jobTitles" [value]="job.title">{{ job.title }}</option>
          </select>

          <input type="number" [(ngModel)]="formModel.postNumber" name="postNumber" placeholder="ุดูุงุฑู ูพุณุช" required />
          <input type="text" [(ngModel)]="formModel.defaultJobTitle" name="defaultJobTitle" placeholder="ุณูุช ูพุดโูุฑุถ" />
          <input type="text" [(ngModel)]="formModel.userJobTitle" name="userJobTitle" placeholder="ุณูุช ฺฉุงุฑุจุฑ" />

          <div class="modal-footer">
            <button type="submit" class="btn-save">โ ุฐุฎุฑู</button>
            <button type="button" class="btn-cancel" (click)="cancelForm()">โ ุงูุตุฑุงู</button>
          </div>
        </form>
      </div>

      <!-- ุฏฺฉูู ุงูุฒูุฏู -->
      <div class="modal-footer" *ngIf="editingIndex === null && !adding">
        <button class="btn-add" (click)="addItem()">โ ุงูุฒูุฏู</button>
      </div>

    </div>
  </div>
</div>